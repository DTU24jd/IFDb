{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/38598/Downloads/IFDB2-main/IFDB2-main/src/components/FavoriteButton.tsx"],"sourcesContent":["/*\n  FavoriteButton omogućuje dodavanje ili uklanjanje serije iz favorita i prikazuje status bez preusmjeravanja.\n  Zašto: Koristi se useEffect za dohvat trenutnog stanja favorita s backend API-ja kako bi se prikazao ispravan status tipke nakon mountanja ili promjene showId.\n  Kako: handleToggleFavorite šalje POST ili DELETE zahtjev na /api/favorites ovisno o trenutnom statusu, a zatim ažurira lokalni state.\n*/\n'use client';\n\nimport { useState, useEffect } from 'react';\n\nexport default function FavoriteButton({ showId }: { showId: number }) {\n  const [isFavorite, setIsFavorite] = useState(false);\n  const [loading, setLoading] = useState(false);\n\n  // useEffect dohvaća favorite s backend API-ja kad se promijeni showId\n  useEffect(() => {\n    fetch('/api/favorites')\n      .then(res => res.json())\n      .then((ids: number[]) => setIsFavorite(ids.includes(showId)));\n  }, [showId]);\n\n  // handleToggleFavorite šalje POST ili DELETE zahtjev ovisno o statusu\n  const handleToggleFavorite = async () => {\n    setLoading(true);\n    if (isFavorite) {\n      await fetch('/api/favorites', {\n        method: 'DELETE',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ id: showId }),\n      });\n      setIsFavorite(false);\n    } else {\n      await fetch('/api/favorites', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ id: showId }),\n      });\n      setIsFavorite(true);\n    }\n    setLoading(false);\n  };\n\n  return (\n    <button\n      onClick={handleToggleFavorite}\n      disabled={loading}\n      className={`px-4 py-2 rounded font-bold transition ${\n        isFavorite\n          ? 'bg-red-400 text-red-900 hover:bg-red-500'\n          : 'bg-yellow-400 text-yellow-900 hover:bg-yellow-500'\n      }`}\n    >\n      {loading\n        ? 'Spremanje...'\n        : isFavorite\n        ? 'Izbaci iz favorita'\n        : 'Dodaj u favorite'}\n    </button>\n  );\n}\n"],"names":[],"mappings":"AAAA;;;;AAIA;;;;AAGA;AAFA;;;AAIe,SAAS,eAAe,EAAE,MAAM,EAAsB;IACnE,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAC7C,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAEvC,sEAAsE;IACtE,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,MAAM,kBACH,IAAI,CAAC,CAAA,MAAO,IAAI,IAAI,IACpB,IAAI,CAAC,CAAC,MAAkB,cAAc,IAAI,QAAQ,CAAC;IACxD,GAAG;QAAC;KAAO;IAEX,sEAAsE;IACtE,MAAM,uBAAuB;QAC3B,WAAW;QACX,IAAI,YAAY;YACd,MAAM,MAAM,kBAAkB;gBAC5B,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;oBAAE,IAAI;gBAAO;YACpC;YACA,cAAc;QAChB,OAAO;YACL,MAAM,MAAM,kBAAkB;gBAC5B,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;oBAAE,IAAI;gBAAO;YACpC;YACA,cAAc;QAChB;QACA,WAAW;IACb;IAEA,qBACE,8OAAC;QACC,SAAS;QACT,UAAU;QACV,WAAW,CAAC,uCAAuC,EACjD,aACI,6CACA,qDACJ;kBAED,UACG,iBACA,aACA,uBACA;;;;;;AAGV"}},
    {"offset": {"line": 67, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}